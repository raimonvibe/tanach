const m=["torah","neviim","trei_asara","ketuvim"];let i=null;async function f(){if(i)return i;const r=[];for(const s of m){const e=await u(s);r.push(...e)}return i=r,r}async function u(r){const e={torah:["bereshit","shemot","vayikra","bamidbar","devarim"],neviim:["yehoshua","shoftim","shmuel1","shmuel2","melachim1","melachim2","yeshayahu","yirmeyahu","yechezkel"],trei_asara:["hoshea","yoel","amos","ovadya","yona","michah","nachum","chavakuk","tzefanya","chagai","zecharya","malachi"],ketuvim:["tehillim","mishlei","iyov","shir_hashirim","rut","eicha","kohelet","esther","daniel","ezra","nechemya","divrei_hayamim1","divrei_hayamim2"]}[r]||[],a=[];for(const o of e)try{const n=await fetch(`/data/books/${r}/${o}.json`);if(n.ok){const h=await n.json();a.push({...h,category:r})}}catch(n){console.error(`Error loading book ${o}:`,n)}return a}async function k(r,s){try{const e=await fetch(`/data/books/${r}/${s}.json`);if(!e.ok)throw new Error("Book not found");return await e.json()}catch(e){throw console.error(`Error loading book ${r}/${s}:`,e),e}}async function y(r,s,e){try{const a=await k(r,s),o=a.chapters.find(n=>n.chapter===parseInt(e));if(!o)throw new Error("Chapter not found");return{book:{id:a.id,name:a.name,category:r},chapter:o}}catch(a){throw console.error(`Error loading chapter ${r}/${s}/${e}:`,a),a}}async function b(r){const s=await f(),e=[],a=r.toLowerCase();for(const o of s)if(o.name.toLowerCase().includes(a)||o.id.toLowerCase().includes(a)){if(o.chapters&&o.chapters.length>0){const h=o.chapters[0];h.verses.slice(0,3).forEach(c=>{e.push({book:o.name,bookId:o.id,category:o.category,chapter:h.chapter,verse:c.verse,hebrew:c.hebrew,english:c.english})})}}else for(const h of o.chapters)for(const t of h.verses){const c=t.hebrew&&t.hebrew.toLowerCase().includes(a),l=t.english&&t.english.toLowerCase().includes(a);if((c||l)&&(e.push({book:o.name,bookId:o.id,category:o.category,chapter:h.chapter,verse:t.verse,hebrew:t.hebrew,english:t.english}),e.length>=100))return e}return e}export{k as a,y as b,f as g,b as s};
